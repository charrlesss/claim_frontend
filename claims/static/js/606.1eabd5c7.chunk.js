"use strict";(self.webpackChunkupward_cliam=self.webpackChunkupward_cliam||[]).push([[606],{8441:()=>{},9606:(e,t,n)=>{n.r(t),n.d(t,{DEPARTMENT:()=>T,blobToFile:()=>C,default:()=>_,formatNumber:()=>A});var l=n(5043),i=n(7941),s=n(222),a=n(1178),o=n(9484),r=n(3587),d=n(324),p=n(5550),c=n(1906),y=n(673),x=n(2050),u=n(7566),f=n(141),m=n(3822),g=n(3438),v=n(64),h=n.n(v),w=n(247),N=n(4619),b=n(8293),D=n(6772),$=n(1675),P=(n(8441),n(579));const S=[{key:"reference",label:"REF#",width:100},{key:"claim_type",label:"CLAIM TYPE",width:100},{key:"date_report",label:"DATE REPORT",width:100},{key:"date_accident",label:"DATE ACCIDENT",width:100},{key:"claimStatus",label:"STATUS",width:130},{key:"date_receive",label:"DATE RECEIVED ",width:100},{key:"amount_claim",label:"AMOUNT CLAIM",width:100,type:"number"},{key:"amount_approved",label:"AMOUNT APPROVED",width:200,type:"number"},{key:"amount_participation",label:"AMOUNT PARTICIPATION",width:200,type:"number"},{key:"amount_net",label:"AMOUN NET",width:100,type:"number"},{key:"name_ttpd",label:"NAME OF TTPD",width:250},{key:"remarks",label:"REMARKS",width:250},{key:"date_approved",label:"DATE APPROVED",width:120},{key:"date_approved_not_formated",label:"",width:0,hide:!0},{key:"date_report_not_formated",label:"",width:0,hide:!0},{key:"date_accident_not_formated",label:"",width:0,hide:!0},{key:"date_receive_not_formated",label:"",width:0,hide:!0},{key:"status",label:"",width:0,hide:!0},{key:"documentId",label:"",width:0,hide:!0},{key:"files",label:"",width:0,hide:!0}],T="CLAIMS",k=(0,l.forwardRef)(((e,t)=>{let{}=e;const n=(0,$.Zp)(),y=(0,l.useRef)(null),x=(0,l.useRef)(null),[u,m]=(0,l.useState)(""),[v,b]=(0,l.useState)(""),{myAxios:D,user:k}=(0,l.useContext)(r.R),I=(0,l.useRef)(null),O=(0,l.useRef)(null),_=(0,l.useRef)(null),M=(0,l.useRef)(null),E=(0,l.useRef)(null),L=(0,l.useRef)(null),z=(0,l.useRef)(""),B=(0,l.useRef)(""),J=(0,l.useRef)(""),[F,U]=(0,l.useState)([]),[G,K]=(0,l.useState)(null),H=(0,l.useRef)(""),Y=(0,l.useRef)(n),V=(0,l.useRef)((e=>{O.current&&(O.current.disabled=e),_.current&&(_.current.disabled=e)})),{isPending:q,mutate:W}=(0,d.n)({mutationKey:["claim-id"],mutationFn:async e=>await D.post("/get-claim-id",e,{headers:{Authorization:`Bearer ${null===k||void 0===k?void 0:k.accessToken}`}}),onSuccess:e=>{const t=e;(0,i.u)(100).then((()=>{O.current&&(O.current.value=t.data.claimID)}))}}),{isPending:Z,mutate:Q}=(0,d.n)({mutationKey:["reference-id"],mutationFn:async e=>await D.post("/get-reference-id",e,{headers:{Authorization:`Bearer ${null===k||void 0===k?void 0:k.accessToken}`}}),onSuccess:(e,t)=>{const l=e;(0,i.u)(100).then((()=>{var e;H.current=l.data.reference;const i=x.current.getData(),s=encodeURIComponent(JSON.stringify({state:{claimType:t.label,reference:l.data.reference,id:t.id,policyNo:z.current,policyType:B.current,policyDepartment:J.current,claimMode:u},dataPreview:{claimMode:JSON.stringify(u),claimId:JSON.stringify(null===(e=O.current)||void 0===e?void 0:e.value),tableData:JSON.stringify(i),policyDetails:JSON.stringify(G),basicDocuments:JSON.stringify(F)}}));n(`/${T}/attactment?Mkr44Rt2iuy13R=${s}`)}))}}),X=(0,l.useRef)(W),ee=(0,l.useRef)(Q),{isPending:te,mutate:ne}=(0,d.n)({mutationKey:["save-documents"],mutationFn:async e=>await D.post("/save-claim",e.formData,{headers:{Authorization:`Bearer ${null===k||void 0===k?void 0:k.accessToken}`,"Content-Type":"multipart/form-data"}}),onSuccess:e=>{const t=e;return t.data.success?(ge(),h().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):h().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),{isPending:le,mutate:ie}=(0,d.n)({mutationKey:["update-documents"],mutationFn:async e=>await D.post("/update-claim",e.formData,{headers:{Authorization:`Bearer ${null===k||void 0===k?void 0:k.accessToken}`,"Content-Type":"multipart/form-data"}}),onSuccess:e=>{const t=e;return t.data.success?(ge(),h().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):h().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),{isPending:se,mutate:ae}=(0,d.n)({mutationKey:["delete-claim"],mutationFn:async e=>await D.post("/delete-claim",e,{headers:{Authorization:`Bearer ${null===k||void 0===k?void 0:k.accessToken}`}}),onSuccess:e=>{const t=e;return t.data.success?(ge(),h().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):h().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),{isPending:oe,mutate:re}=(0,d.n)({mutationKey:["selected-search-policy"],mutationFn:async e=>await D.post("/selected-search-policy",e,{headers:{Authorization:`Bearer ${null===k||void 0===k?void 0:k.accessToken}`}}),onSuccess:e=>{K(e.data)}}),{isPending:de,mutate:pe}=(0,d.n)({mutationKey:["selected-search-claim"],mutationFn:async e=>await D.post("/selected-search-claim",e,{headers:{Authorization:`Bearer ${null===k||void 0===k?void 0:k.accessToken}`}}),onSuccess:async e=>{const t=e,n=t.data.claim.claimId;O.current&&(O.current.value=n);const l=JSON.parse(t.data.claim.basicDocument).map((e=>(e.files.length>0?e.files=e.files.map((e=>({link:`/claim-files/${n}/${e}`,filename:e}))):e.files=null,e)));U(l),K(e.data);const i=t.data.claim.claimDetails.map((e=>{const t=JSON.parse(e.files);return e.files=t.map((t=>(t.files=t.files.map((t=>({link:`/claim-files/${e.claim_id}/${e.reference}/${e.documentId}/${t}`,filename:t}))),{...t,reference:e.reference}))),e}));x.current.setDataFormated(i)}}),{UpwardTableModalSearch:ce,openModal:ye,closeModal:xe}=(0,s.Ko)({size:"large",link:"/search-policy",column:[{key:"PolicyNo",label:"Policy No",width:100},{key:"PolicyType",label:"Policy Type.",width:120},{key:"IDNo",label:"ID No.",width:150},{key:"Name",label:"Name",width:300},{key:"Department",label:"Department",width:90}],getSelectedItem:async(e,t,n,l)=>{e&&(re({policyNo:e[0],policyType:e[1],department:e[4]}),xe())}}),{UpwardTableModalSearch:ue,openModal:fe,closeModal:me}=(0,s.Ko)({size:"large",link:"/search-claim",column:[{key:"claim_id",label:"Claim ID.",width:100},{key:"PolicyNo",label:"Policy No",width:100},{key:"PolicyType",label:"Policy Type.",width:120},{key:"IDNo",label:"ID No.",width:150},{key:"Name",label:"Name",width:300},{key:"ChassisNo",label:"Chassis No",width:300},{key:"Department",label:"Department",width:90}],getSelectedItem:async(e,t,n,l)=>{e&&(m("update"),pe({claim_id:e[0],policyNo:e[1],policyType:e[2],department:e[6]}),me())}});(0,l.useEffect)((()=>{if(G){const e=parseFloat(G.payment.totalGross[0].TotalDue);let t=parseFloat(G.payment.totalPaidDeposit[0].totalDeposit)-parseFloat(G.payment.totalPaidReturned[0].totalReturned);!function(e,t){t.current&&(t.current.innerHTML=`\n     <div style="display:flex;flex:1,width:100%;">\n      <div style="flex:1;">\n        <div style="display:flex;column-gap:20px"><span style="width:120px">Total Premium  :</span> <strong style="width:70px;text-align:right;">${A(e.totalGross)}</strong></div>\n            <div style="display:flex;column-gap:20px"><span style="width:120px">Total Paid :</span> <strong style="width:70px;text-align:right;">${A(e.totalPaid)}</strong></div>\n            <div style="width:220px;border-top:1px solid black;"></div>\n            <div style="display:flex;column-gap:20px;"><span style="width:120px";>Total Balance :</span> \n            <strong style="width:70px;text-align:right;color:${e.totalBalance<=0?"green":"red"}">${A(e.totalBalance)}</strong></div>\n      </div>\n     </div>\n    `)}({totalGross:e,totalPaid:t,totalBalance:e-(t+parseFloat(G.payment.totalDiscount[0].discount))},E);const n=G.data[0];z.current=n.PolicyNo,B.current=n.PolicyType,J.current=n.Department,b(n.Department),function(e,t){"COM"===e.PolicyType||"TPL"===e.PolicyType?t.current&&(t.current.innerHTML=`\n     <div style="display:flex;flex:1,width:100%;column-gap:20px;">\n      <div style="flex:1;">\n        <div style="display:flex;column-gap:20px"><span style="width:80px">Policy No.:</span> <strong style="flex:1">${e.PolicyNo||""}</strong></div>\n        <div style="display:flex;column-gap:20px"><span style="width:80px">Name.:</span><strong style="flex:1"> ${e.Name||""}</strong></div>\n        <div style="display:flex;column-gap:20px"><span style="width:80px">ID No.:</span><strong style="flex:1"> ${e.IDNo||""}</strong></div>\n        <div style="display:flex;column-gap:20px"><span style="width:80px">Policy Type.:</span><strong style="flex:1"> ${e.PolicyType||""}</strong></div>\n         <div style="display:flex;column-gap:20px"><span style="width:80px">Account : </span><strong style="flex:1">${e.Account||""}</strong></div>\n        <div style="display:flex;column-gap:20px"><span style="width:80px">Department: </span><strong style="flex:1">${e.Department||""}</strong></div>\n        <div style="display:flex;column-gap:20px"><span style="width:80px">Chassis No.:</span><strong style="flex:1"> ${e.ChassisNo||""}</strong></div>\n      </div>\n      <div style="flex:1;">\n      <div style="display:flex;column-gap:20px"><span style="width:80px">Motor No.:</span> <strong style="flex:1">${e.MotorNo||""}</strong></div>\n       <div style="display:flex;column-gap:20px"><span style="width:80px">Cover No.:</span> <strong style="flex:1">${e.CoverNo||""}</strong></div>\n        <div style="display:flex;column-gap:20px"><span style="width:80px">OR No.:</span> <strong style="flex:1">${e.ORNo||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Model:</span> <strong style="flex:1">${e.Model||""}</strong></div>\n             <div style="display:flex;column-gap:20px"><span style="width:80px">Make :</span> <strong style="flex:1">${e.Make||""}</strong></div>\n                   <div style="display:flex;column-gap:20px"><span style="width:80px">Body Type :</span> <strong style="flex:1">${e.BodyType||""}</strong></div>\n                      <div style="display:flex;column-gap:20px"><span style="width:80px">Plate No. :</span> <strong style="flex:1">${e.PlateNo||""}</strong></div>\n      </div>\n     </div>\n     \n      \n    `):"FIRE"===e.PolicyType?t.current&&(t.current.innerHTML=`\n    <div style="display:flex;flex:1,width:100%;column-gap:20px;">\n      <div style="flex:1;">\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Policy No. :</span> <strong style="flex:1">${e.PolicyNo||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Name. :</span><strong style="flex:1"> ${e.Name||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">ID No. :</span><strong style="flex:1"> ${e.IDNo||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Policy Type. :</span><strong style="flex:1"> ${e.PolicyType||""}</strong></div>\n           <div style="display:flex;column-gap:20px"><span style="width:80px">Account : </span><strong style="flex:1">${e.Account||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Department : </span><strong style="flex:1">${e.Department||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Location : </span><strong style="flex:1">${e.Location||""}</strong></div>\n      </div>\n      <div style="flex:1;">\n        <div style="display:flex;column-gap:20px"><span style="width:80px">Property Insured : </span><strong style="flex:1">${e.PropertyInsured||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Occupancy :</span> <strong style="flex:1">${e.Occupancy||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Boundaries :</span><strong style="flex:1"> ${e.Boundaries||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Mortgage :</span><strong style="flex:1"> ${e.Mortgage||""}</strong></div>\n      </div>\n    </div>\n      `):"CGL"===e.PolicyType?t.current&&(t.current.innerHTML=`\n    <div style="display:flex;flex:1,width:100%;column-gap:20px;">\n      <div style="flex:1;">\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Policy No. :</span> <strong style="flex:1">${e.PolicyNo||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Name. :</span><strong style="flex:1"> ${e.Name||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">ID No. :</span><strong style="flex:1"> ${e.IDNo||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Policy Type. :</span><strong style="flex:1"> ${e.PolicyType||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Account : </span><strong style="flex:1">${e.Account||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Department : </span><strong style="flex:1">${e.Department||""}</strong></div>\n      </div>\n      <div style="flex:1;">\n        <div style="display:flex;column-gap:20px"><span style="width:80px">Location : </span><strong style="flex:1">${e.Location||""}</strong></div>\n      </div>\n    </div>\n      `):"MAR"===e.PolicyType?t.current&&(t.current.innerHTML=`\n    <div style="display:flex;flex:1,width:100%;column-gap:20px;">\n      <div style="flex:1;">\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Policy No. :</span> <strong style="flex:1">${e.PolicyNo||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Name. :</span><strong style="flex:1"> ${e.Name||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">ID No. :</span><strong style="flex:1"> ${e.IDNo||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Policy Type. :</span><strong style="flex:1"> ${e.PolicyType||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Account : </span><strong style="flex:1">${e.Account||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Department : </span><strong style="flex:1">${e.Department||""}</strong></div>\n      </div>\n      <div style="flex:1;">\n        <div style="display:flex;column-gap:20px"><span style="width:115px">Point Of Origin : </span><strong style="flex:1">${e.PointOfOrigin||""}</strong></div>\n        <div style="display:flex;column-gap:20px"><span style="width:115px">Point of Destination : </span><strong style="flex:1">${e.PointofDestination||""}</strong></div>\n        <div style="display:flex;column-gap:20px"><span style="width:115px">Vessel : </span><strong style="flex:1">${e.Vessel||""}</strong></div>\n        <div style="display:flex;column-gap:20px"><span style="width:115px">Additional Info : </span><strong style="flex:1">${e.AdditionalInfo||""}</strong></div>\n        <div style="display:flex;column-gap:20px"><span style="width:115px">Subject Insured : </span><strong style="flex:1">${e.SubjectInsured||""}</strong></div>\n         <div style="display:flex;column-gap:20px"><span style="width:115px">Consignee : </span><strong style="flex:1">${e.Consignee||""}</strong></div>\n      </div>\n    </div>\n      `):"MSPR"===e.PolicyType?t.current&&(t.current.innerHTML=`\n    <div style="display:flex;flex:1,width:100%;column-gap:20px;">\n      <div style="flex:1;">\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Policy No. :</span> <strong style="flex:1">${e.PolicyNo||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Name. :</span><strong style="flex:1"> ${e.Name||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">ID No. :</span><strong style="flex:1"> ${e.IDNo||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Policy Type. :</span><strong style="flex:1"> ${e.PolicyType||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Account : </span><strong style="flex:1">${e.Account||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Department : </span><strong style="flex:1">${e.Department||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Location : </span><strong style="flex:1">${e.Location||""}</strong></div>\n      </div>\n      <div style="flex:1;">\n        <div style="display:flex;column-gap:20px"><span style="width:80px">Safe Room : </span><strong style="flex:1">${e.Saferoom||""}</strong></div>\n        <div style="display:flex;column-gap:20px"><span style="width:80px">Origin Point : </span><strong style="flex:1">${e.OriginPoint||""}</strong></div>\n         <div style="display:flex;column-gap:20px"><span style="width:80px">Destination Point : </span><strong style="flex:1">${e.DestinationPoint||""}</strong></div>\n        <div style="display:flex;column-gap:20px"><span style="width:80px">Guard : </span><strong style="flex:1">${e.Guard||""}</strong></div>\n        <div style="display:flex;column-gap:20px"><span style="width:80px">Messenger : </span><strong style="flex:1">${e.Messenger||""}</strong></div>\n      </div>\n    </div>\n      `):"PA"===e.PolicyType?t.current&&(t.current.innerHTML=`\n    <div style="display:flex;flex:1,width:100%;column-gap:20px;">\n      <div style="flex:1;">\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Policy No. :</span> <strong style="flex:1">${e.PolicyNo||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Name. :</span><strong style="flex:1"> ${e.Name||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">ID No. :</span><strong style="flex:1"> ${e.IDNo||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Policy Type. :</span><strong style="flex:1"> ${e.PolicyType||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Account : </span><strong style="flex:1">${e.Account||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Department : </span><strong style="flex:1">${e.Department||""}</strong></div>\n      </div>\n      <div style="flex:1;">\n        <div style="display:flex;column-gap:20px"><span style="width:80px">Location : </span><strong style="flex:1">${e.Location||""}</strong></div>\n      </div>\n    </div>\n      `):t.current&&(t.current.innerHTML=`\n    <div style="display:flex;flex:1,width:100%;column-gap:20px;">\n      <div style="flex:1;">\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Policy No. :</span> <strong style="flex:1">${e.PolicyNo||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Name. :</span><strong style="flex:1"> ${e.Name||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">ID No. :</span><strong style="flex:1"> ${e.IDNo||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Policy Type. :</span><strong style="flex:1"> ${e.PolicyType||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Account : </span><strong style="flex:1">${e.Account||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:80px">Department : </span><strong style="flex:1">${e.Department||""}</strong></div>\n           <div style="display:flex;column-gap:20px"><span style="width:80px">Obligee : </span><strong style="flex:1">${e.Obligee||""}</strong></div>\n      </div>\n      <div style="flex:1;">\n         <div style="display:flex;column-gap:20px"><span style="width:120px">Unit Detail : </span><strong style="flex:1">${e.UnitDetail||""}</strong></div>\n         <div style="display:flex;column-gap:20px"><span style="width:120px">Notary Name : </span><strong style="flex:1">${e.NotaryName||""}</strong></div>\n         <div style="display:flex;column-gap:20px"><span style="width:120px">Tax Cert. No : </span><strong style="flex:1">${e.TaxCerNo||""}</strong></div>\n        <div style="display:flex;column-gap:20px"><span style="width:120px">Issued Location : </span><strong style="flex:1">${e.IssuedLocation||""}</strong></div>\n          <div style="display:flex;column-gap:20px"><span style="width:120px">Capacity As : </span><strong style="flex:1">${e.CapacityAs||""}</strong></div>\n        <div style="display:flex;column-gap:20px"><span style="width:120px">Tax Cert. No Corp. : </span><strong style="flex:1">${e.TaxCerNoCorp||""}</strong></div>\n        <div style="display:flex;column-gap:20px"><span style="width:120px">Issued Loction Corp. : </span><strong style="flex:1">${e.IssuedLoctCorp||""}</strong></div>\n      </div>\n    </div>\n      `)}(n,M)}}),[G]),(0,l.useEffect)((()=>{""===u?V.current(!0):V.current(!1)}),[u]),(0,l.useEffect)((()=>{const e=new URLSearchParams(window.location.search).get("Mkr44Rt2iuy13R");if(e){const t=JSON.parse(decodeURIComponent(e)),n=JSON.parse(t.claimId),l=JSON.parse(t.claimMode),i=JSON.parse(t.policyDetails),s=JSON.parse(t.tableData);console.log(s),O.current&&(O.current.value=n),U(JSON.parse(t.basicDocuments)),K(i),m(l),x.current.setData(s),Y.current(`/${T}/dashboard`)}else X.current({})}),[]),(0,l.useEffect)((()=>{const e=()=>{window.history.pushState(null,"",window.location.href)};return e(),window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}}),[]);const ge=()=>{z.current="",X.current({}),m(""),M.current&&(M.current.innerHTML='\n        <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);fontSize:12px">\n        NO SELECTED POLICY\n        </div>\n      '),E.current&&(E.current.innerHTML='\n        <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);fontSize:12px">\n        NO SELECTED POLICY\n        </div>\n      '),b(""),K(null),U([]),(0,i.u)(100).then((()=>{var e;window.localStorage.removeItem("table-data"),window.localStorage.removeItem("policy-details"),window.localStorage.removeItem("configuration"),x.current.resetCheckBox(),null===(e=x.current)||void 0===e||e.resetTable()}))},ve=e=>{ee.current(e)};return(0,P.jsxs)(P.Fragment,{children:[(te||te||q||oe||Z||se||le||de)&&(0,P.jsx)(a.R,{}),(0,P.jsx)(ce,{}),(0,P.jsx)(ue,{}),(0,P.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"10px",padding:"10px",flex:1,width:"100wv",height:"100vh"},children:[(0,P.jsxs)("div",{style:{display:"flex",columnGap:"10px"},children:[(0,P.jsx)(N.ks,{label:{title:"Search: ",style:{fontSize:"12px",fontWeight:"bold",width:"50px"}},input:{className:"search-input-up-on-key-down",type:"search",onKeyDown:e=>{if("Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),fe(e.currentTarget.value)),"ArrowDown"===e.key){e.preventDefault();document.querySelector(".grid-container").focus()}},style:{width:"500px"}},icon:(0,P.jsx)(o.A,{sx:{fontSize:"18px"}}),onIconClick:e=>{e.preventDefault(),I.current&&fe(I.current.value)},inputRef:I}),(0,P.jsxs)("div",{style:{display:"flex",columnGap:"10px"},children:["UMIS"===v&&(0,P.jsx)(j,{ref:y,onClick:ve}),"UCSMI"===v&&(0,P.jsx)(R,{ref:y,onClick:ve}),""===u&&(0,P.jsx)(c.A,{sx:{height:"22px",fontSize:"11px"},variant:"contained",startIcon:(0,P.jsx)(f.A,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:()=>{m("add")},color:"primary",children:"New"}),(0,P.jsx)(c.A,{sx:{height:"22px",fontSize:"11px"},disabled:""===u,onClick:async()=>{var e,t,n,l;if(""===(null===(e=O.current)||void 0===e?void 0:e.value))return alert("Claim No is required");if(""===z.current)return null===(n=_.current)||void 0===n||n.focus(),alert("Policy No is required");if(x.current.getData().length<=0)return null===(l=L.current)||void 0===l||l.click(),alert("List is Empty");const i=x.current.getData(),s=new FormData,a=[];F.forEach((async e=>{if(e.files)for(const t of e.files){const n=await C(t.link,`${t.filename}-${e.id}`);s.append("basic",n)}}));for(const r of i){var o;const e=[];s.append("metadata",JSON.stringify({reference:r[0],claim_type:r[1],date_report:r[2],date_accident:r[3],claimStatus:r[4],date_receive:r[5],amount_claim:r[6],amount_approved:r[7],amount_participation:r[8],amount_net:r[9],name_ttpd:r[10],remarks:r[11],date_report_not_formated:r[14],date_accident_not_formated:r[15],date_receive_not_formated:r[16],date_approved_not_formated:r[13],status:r[17],documentId:r[18],claimId:null===(o=O.current)||void 0===o?void 0:o.value}));const t=r[r.length-1];for(const n of t){if(n.files){for(const e of n.files){const t=await C(e.link,`${e.filename}-${n.reference}-${n.document_id}-${n.id}`);s.append("files",t)}e.push({id:n.id,label:n.label,document_id:n.document_id,reference:n.reference,required:n.required,primaryDocuments:n.primaryDocuments,others:n.others})}r.pop()}a.push(e)}s.append("filesArray",JSON.stringify(a)),s.append("claimId",null===(t=O.current)||void 0===t?void 0:t.value),s.append("policyDetails",JSON.stringify(G)),s.append("basicDocuments",JSON.stringify(F)),"update"===u?(0,w.Z)({isUpdate:!0,cb:e=>{s.append("userCodeConfirmation",e),ie({formData:s})}}):(0,w.x)({isConfirm:()=>{ne({formData:s})}})},color:"success",variant:"contained",children:"Save"}),"update"===u&&(0,P.jsx)(c.A,{sx:{height:"22px",fontSize:"11px"},variant:"contained",startIcon:(0,P.jsx)(f.A,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:()=>{(0,w.Z)({isUpdate:!1,cb:e=>{var t;ae({userCodeConfirmation:e,isUpdate:!0,claimId:null===(t=O.current)||void 0===t?void 0:t.value})}})},color:"error",children:"Void"}),""!==u&&(0,P.jsx)(c.A,{sx:{height:"22px",fontSize:"11px"},variant:"contained",startIcon:(0,P.jsx)(g.A,{sx:{width:15,height:15}}),color:"warning",onClick:()=>{h().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((e=>{e.isConfirmed&&ge()}))},disabled:""===u,children:"Cancel"})]})]}),(0,P.jsxs)("fieldset",{style:{flexDirection:"column",gap:"10px",border:"1px solid #cbd5e1",borderRadius:"5px",width:"100%",position:"relative",boxSizing:"border-box"},children:[(0,P.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"5px"},children:[(0,P.jsx)(N.ks,{containerStyle:{width:"200px"},label:{title:"Claim No. : ",style:{fontSize:"12px",fontWeight:"bold",width:"90px"}},input:{disabled:!0,readOnly:!0,type:"text",style:{width:"calc(100% - 90px)",height:"22px !important"},onKeyDown:e=>{"NumpadEnter"!==e.code&&"Enter"!==e.code||X.current({})}},inputRef:O,icon:(0,P.jsx)(p.A,{sx:{fontSize:"18px"}}),onIconClick:e=>{X.current({})}}),(0,P.jsxs)("div",{style:{display:"flex",flexDirection:"row",columnGap:"10px"},children:[(0,P.jsx)(N.ks,{containerStyle:{width:"550px",marginBottom:"5px"},label:{title:"Search Policy : ",style:{fontSize:"12px",fontWeight:"bold",width:"90px"}},input:{disabled:!0,className:"search-input-up-on-key-down",type:"search",style:{width:"calc(100% - 90px)"},onKeyDown:e=>{"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),ye(e.currentTarget.value))}},icon:(0,P.jsx)(o.A,{sx:{fontSize:"18px"}}),onIconClick:e=>{e.preventDefault(),_.current&&ye(_.current.value)},inputRef:_}),(0,P.jsx)(c.A,{sx:{height:"22px",fontSize:"11px"},disabled:null===G,onClick:()=>{var e;const t=x.current.getData(),l=encodeURIComponent(JSON.stringify({claimMode:JSON.stringify(u),claimId:JSON.stringify(null===(e=O.current)||void 0===e?void 0:e.value),tableData:JSON.stringify(t),policyDetails:JSON.stringify(G),basicDocuments:JSON.stringify(F)}));n(`/${T}/attactment/basic-document?Mkr44Rt2iuy13R=${l}`)},color:"success",variant:"contained",children:"Add Basic Documents"})]})]}),(0,P.jsxs)("div",{style:{display:"flex",columnGap:"10px"},children:[(0,P.jsxs)("fieldset",{style:{flexDirection:"row",gap:"10px",border:"1px solid #cbd5e1",borderRadius:"5px",width:"75%",position:"relative",fontSize:"13px",display:"flex",columnGap:"100px"},children:[(0,P.jsx)("legend",{children:"Policy Details"}),(0,P.jsx)("div",{ref:M,style:{width:"100%",position:"relative",minHeight:"100px"},children:(0,P.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",fontSize:"12px"},children:"NO SELECTED POLICY"})})]}),(0,P.jsxs)("fieldset",{style:{flexDirection:"row",gap:"10px",border:"1px solid #cbd5e1",borderRadius:"5px",width:"25%",position:"relative",fontSize:"13px",display:"flex",columnGap:"100px"},children:[(0,P.jsx)("legend",{children:"Payment Details"}),(0,P.jsx)("div",{ref:E,style:{width:"100%",position:"relative"},children:(0,P.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",fontSize:"12px"},children:"NO SELECTED POLICY"})})]})]})]}),(0,P.jsx)(s.z4,{containerStyle:{flex:1,height:"auto"},ref:x,columns:S,height:"280px",getSelectedItem:e=>{e&&(0,i.u)(100).then((()=>{var t;const l=x.current.getData(),i=encodeURIComponent(JSON.stringify({state:{claimType:e[1],reference:e[0],id:e[18],policyNo:G.policyNo,policyType:G.policyType,policyDepartment:G.Department,claimMode:u},dataPreview:{claimMode:JSON.stringify(u),claimId:JSON.stringify(null===(t=O.current)||void 0===t?void 0:t.value),tableData:JSON.stringify(l),policyDetails:JSON.stringify(G),basicDocuments:JSON.stringify(F)},fields:{date_report:e[14],date_accident:e[15],date_receive:e[16],amount_claim:e[6],amount_approved:e[7],amount_participation:e[8],amount_net:e[9],name_ttpd:e[10],remarks:e[11],date_approved:e[13],status:e[17],claimStatus:e[4],documentId:e[18]},documents:e[19],selectedIndex:x.current.getSelectedRow()}));n(`/${T}/attactment/update?Mkr44Rt2iuy13R=${i}`)}))},onKeyDown:(e,t,n)=>{if("Delete"===n.code||"Backspace"===n.code){if(window.confirm("Are you sure you want to delete?")){const e=x.current.getData();return e.splice(t,1),x.current.setData(e),x.current.setSelectedRow(null),void x.current.resetCheckBox()}}}})]})]})}));async function C(e,t){const n=await fetch(e),l=await n.blob();return new File([l],t,{type:"image/png"})}function A(e){return(e||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}const I=[{label:"Comprehensive",children:[{label:"Own Damage",id:"0001"},{label:"Theft/Carnap",id:"0002"},{label:"Acts of Nature",id:"0003"},{label:"Third Party Bodily Injury ",id:"0004"},{label:"Third Party Property Damage",id:"0005"},{label:"Unnamed Passenger Personal Accident ",id:"0006"}]},{label:"TPL",children:[{label:"Bodily Injury",id:"0007"},{label:"Death Claim",id:"0008"}]},{label:"Fire",children:[{label:"Fire"}]},{label:"Marine",children:[{label:"Marine"}]},{label:"Property Fluater",children:[{label:"Acts of Nature"},{label:"Own Damage"},{label:"Third Party Damage"}]},{label:"GPA",children:[{label:"Bodily Injury",id:"00021"},{label:"Death Claim",id:"00022"}]}],O=e=>{let{item:t,onClick:n}=e;const[i,s]=(0,l.useState)(null);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(y.A,{onClick:e=>{s(i?null:e.currentTarget)},children:t.children?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(x.A,{children:i?(0,P.jsx)(b.A,{}):(0,P.jsx)(D.A,{})}),(0,P.jsx)(u.A,{primary:t.label})]}):(0,P.jsx)(u.A,{primary:t.label,onClick:e=>n(t,e)})}),t.children&&(0,P.jsx)(m.A,{anchorEl:i,open:Boolean(i),onClose:()=>s(null),anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},children:t.children.map(((e,t)=>(0,P.jsx)(O,{item:e,onClick:n},t)))})]})},j=(0,l.forwardRef)(((e,t)=>{let{disabled:n,onClick:i}=e;const[s,a]=(0,l.useState)(null);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(c.A,{disabled:n,onClick:e=>{a(e.currentTarget)},sx:{height:"22px",fontSize:"11px"},startIcon:(0,P.jsx)(f.A,{}),variant:"contained",children:"Add Claim"}),(0,P.jsx)(m.A,{anchorEl:s,open:Boolean(s),onClose:()=>{a(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:I.map(((e,t)=>(0,P.jsx)(O,{item:e,onClick:i},t)))})]})})),R=(0,l.forwardRef)(((e,t)=>{let{disabled:n,onClick:i}=e;const[s,a]=(0,l.useState)(null);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(c.A,{disabled:n,onClick:e=>{a(e.currentTarget)},sx:{height:"22px",fontSize:"11px"},startIcon:(0,P.jsx)(f.A,{}),variant:"contained",children:"Add Claim"}),(0,P.jsx)(m.A,{anchorEl:s,open:Boolean(s),onClose:()=>{a(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:I.map(((e,t)=>(0,P.jsx)(O,{item:e,onClick:i},t)))})]})}));const _=k}}]);
//# sourceMappingURL=606.1eabd5c7.chunk.js.map